<!DOCTYPE html>
<html>
<head>
  <title>TechnoForge Challenge</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app-shell">
  <aside class="sidebar">
    <div class="brand"><span class="brand-icon">âš™ï¸</span>TechnoForge</div>
    <nav class="side-nav">
      <a class="active" href="index.html"><span class="nav-icon">âŒ‚</span>Home</a>
      <a href="problem.html"><span class="nav-icon">ğŸ“‹</span>Problem Statement</a>
      <a href="upload.html"><span class="nav-icon">ğŸš€</span>Submissions</a>
      <a href="leaderboard.html"><span class="nav-icon">ğŸ¥‡</span>Leaderboard</a>
    </nav>
    <div class="sidebar-footer">
      <div class="user-info">
        <span class="user-avatar" id="userAvatar">T</span>
        <span class="user-name" id="userName">Team</span>
      </div>
      <button class="logout-btn" onclick="logout()">ğŸšª Logout</button>
    </div>
  </aside>

  <main class="main-content">
    <header style="text-align:center;margin-bottom:20px">ğŸ‰ Welcome to TechnoForge Hackathon</header>
    <section class="card full">
      <div class="hero">
        <div>
          <h1>ğŸ“Š Inter-City Service Demand Forecasting</h1>
          <p>Predict service demand, upload your forecasts, and compete on a live leaderboard â€” all in one unified platform.</p>
          <div style="margin-top:20px;display:flex;gap:12px;flex-wrap:wrap">
            <a class="primary-btn" href="upload.html">ğŸš€ Submit Prediction</a>
            <a class="pill" href="leaderboard.html">ğŸ† View Leaderboard</a>
          </div>
        </div>
      </div>

      <div class="feature-grid">
        <div class="feature">
          <div style="font-size:1.8rem;margin-bottom:12px">ğŸ“Š</div>
          <strong>Metric Score Ranking</strong>
          <div style="opacity:.75;margin-top:8px;color:var(--text-muted);line-height:1.5">Fair and transparent SMAPE-based evaluation metric.</div>
        </div>
        <div class="feature">
          <div style="font-size:1.8rem;margin-bottom:12px">ğŸ†</div>
          <strong>Live Leaderboard</strong>
          <div style="opacity:.75;margin-top:8px;color:var(--text-muted);line-height:1.5">Real-time auto-refreshing rankings with submission history.</div>
        </div>
        <div class="feature">
          <div style="font-size:1.8rem;margin-bottom:12px">ğŸ”’</div>
          <strong>Secure & Reliable</strong>
          <div style="opacity:.75;margin-top:8px;color:var(--text-muted);line-height:1.5">Safe uploads with persistent data storage.</div>
        </div>
      </div>
    </section>
    <footer>Â© 2025 TechnoForge Platform</footer>
  </main>
</div>

<script>
// Auth check via database
(async function() {
  try {
    const res = await fetch('/auth/me', {credentials: 'same-origin'});
    const data = await res.json();
    
    if (!data.authenticated) {
      window.location.href = 'login.html';
      return;
    }
    
    // Update user info in sidebar
    document.getElementById('userName').textContent = data.team_name;
    document.getElementById('userAvatar').textContent = data.team_name.charAt(0).toUpperCase();
  } catch (e) {
    window.location.href = 'login.html';
  }
})();

async function logout() {
  await fetch('/auth/logout', { method: 'POST', credentials: 'same-origin' });
  window.location.href = 'login.html';
}
</script>
</body>
</html>
